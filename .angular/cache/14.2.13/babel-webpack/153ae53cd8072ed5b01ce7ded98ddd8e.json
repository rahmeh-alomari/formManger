{"ast":null,"code":"import { __decorate } from \"tslib\"; // src/app/contact-form/contact-form.component.ts\n\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport emailjs from 'emailjs-com';\nimport { environment } from '../../../environments/environment';\nlet ContactFormComponent = class ContactFormComponent {\n  constructor(fb) {\n    this.fb = fb;\n    this.contactForm = this.fb.group({\n      from_name: ['', Validators.required],\n      from_email: ['', [Validators.required, Validators.email]],\n      message: ['', Validators.required],\n      pdfFile: [null, Validators.required],\n      employeeLevel: ['', Validators.required] // For storing the level of the employee\n\n    });\n  }\n\n  sendEmail() {\n    if (this.contactForm.invalid) {\n      alert('Please fill in all required fields correctly.');\n      return;\n    }\n\n    const formData = {\n      from_name: this.contactForm.value.from_name,\n      from_email: this.contactForm.value.from_email,\n      message: this.contactForm.value.message,\n      pdfFile: this.contactForm.value.pdfFile,\n      employeeLevel: this.contactForm.value.employeeLevel // Get the employee level from form\n\n    };\n    const templateParams = {\n      from_name: formData.from_name,\n      from_email: formData.from_email,\n      message: formData.message,\n      employeeLevel: formData.employeeLevel // Pass employee level to template params\n\n    };\n    const serviceId = 'service_6u241zb'; // Replace with your EmailJS service ID\n\n    const templateId = 'template_8su2quk'; // Replace with your EmailJS template ID\n\n    const emailJsPublicKey = environment.emailJsPublicKey; // Replace with your EmailJS user ID\n    // Upload the PDF file to EmailJS as an attachment\n\n    const file = formData.pdfFile;\n    const attachment = {\n      filename: file.name,\n      contentType: file.type,\n      data: file // Pass the file object directly for attachment\n\n    }; // Send email with template parameters and attachment\n\n    emailjs.send(serviceId, templateId, templateParams, emailJsPublicKey).then(response => {\n      console.log('Email sent:', response);\n      alert('Email sent successfully!');\n    }, error => {\n      console.error('Error sending email:', error);\n      alert('There was an error sending the email.');\n    });\n  }\n\n  onFileChange(event) {\n    if (event.target.files.length > 0) {\n      const file = event.target.files[0];\n      this.contactForm.patchValue({\n        pdfFile: file\n      });\n    }\n  }\n\n};\nContactFormComponent = __decorate([Component({\n  selector: 'app-contact-form',\n  templateUrl: './contact-form.component.html',\n  styleUrls: ['./contact-form.component.css']\n})], ContactFormComponent);\nexport { ContactFormComponent };","map":null,"metadata":{},"sourceType":"module"}